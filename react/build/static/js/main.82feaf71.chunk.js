(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t){},124:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(24),i=n.n(r),s=(n(70),n(3)),c=n(4),l=n(6),u=n(5),m=n(19),p=n(14),h=n(7),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={roomNumber:""},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.goToRoom=a.goToRoom.bind(Object(h.a)(a)),a}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.setState({roomNumber:e.target.value})}},{key:"goToRoom",value:function(){var e="/rooms/"+this.state.roomNumber;this.props.history.push(e)}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{onSubmit:this.submit,ref:function(t){return e.setWrapperRef=t}},o.a.createElement("input",{className:"pop-up",type:"text",value:this.state.roomNumber,placeholder:"Room Number",onChange:this.handleChange,required:!0,maxLength:"4",pattern:"[0-9]*"}),o.a.createElement("button",{onTouchStart:"",style:{backgroundColor:"rgb(95, 204, 95)"},onClick:this.goToRoom},"JOIN"))}}]),n}(o.a.Component),g=Object(p.f)(d),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={formShowing:!1},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"main-page"},o.a.createElement("img",{src:"logo.png",className:"logo",alt:"Chicken Tinder Icon",onClick:function(){return e.setState({formShowing:!1})}}),o.a.createElement("div",null,this.state.formShowing?o.a.createElement(g,null):o.a.createElement("div",null,o.a.createElement("button",{className:"pop-up",onTouchStart:"",onClick:function(t){e.props.history.push("/create")}},"CREATE ROOM"),o.a.createElement("button",{onTouchStart:"",onClick:function(){return e.setState({formShowing:!0})}},"JOIN ROOM"))))}}]),n}(o.a.Component),b=n(15),v=n(16);function y(){return o.a.createElement("div",{className:"main-page"},o.a.createElement("h2",null,"Page Not Found"),o.a.createElement(m.b,{to:"/"},o.a.createElement(b.a,{icon:v.a,size:"2x"})))}function E(){return o.a.createElement("div",{className:"main-page"},o.a.createElement("h2",null,"Room Not Found"),o.a.createElement("p",null,"Please make sure you've entered a valid room ID in the URL   "),o.a.createElement(m.b,{to:"/"},o.a.createElement(b.a,{icon:v.a,size:"2x"})))}var k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={active:1},a}return Object(c.a)(n,[{key:"_handleClick",value:function(e){this.setState({active:e}),(0,this.props.updateRadius)(e)}},{key:"render",value:function(){var e={width:"27%",display:"inline-block",fontSize:"small",backgroundColor:"#b6b6b6"},t={width:"27%",display:"inline-block",fontSize:"small",fontWeight:"bolder",backgroundColor:"#858585",boxShadow:"0 0px rgba(153, 153, 153, 0.24)",transform:"translateY(1px)"};return o.a.createElement("div",{style:{paddingBottom:"20px",paddingTop:"20px"}},o.a.createElement("button",{onTouchStart:"",onClick:this._handleClick.bind(this,1),style:1===this.state.active?t:e},"1KM"),o.a.createElement("button",{onTouchStart:"",onClick:this._handleClick.bind(this,2),style:2===this.state.active?t:e},"2KM"),o.a.createElement("button",{onTouchStart:"",onClick:this._handleClick.bind(this,5),style:5===this.state.active?t:e},"5KM"))}}]),n}(o.a.Component),j=n(61),S=n.n(j),O=n(62),C=n.n(O),w="http://app-chicken-tinder.apps.us-east-2.starter.openshift-online.com",N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={currentCity:"Retrieving Location...",longitude:0,latitude:0,locationRetrieved:!1,radius:1,loading:!1},a.createJoinRoom=a.createJoinRoom.bind(Object(h.a)(a)),a.goToRoom=a.goToRoom.bind(Object(h.a)(a)),a.updateRadius=a.updateRadius.bind(Object(h.a)(a)),a}return Object(c.a)(n,[{key:"updateRadius",value:function(e){this.setState({radius:e})}},{key:"componentDidMount",value:function(){var e=this;fetch("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyDj9SUs2BLoGDf-ctUrDX1Mj11XBpdAzks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return 200===t.status?t.json():(e.setState({currentCity:"Cannot get coordinates"}),Promise.reject("Google geolocation API cannot get coordinates"))})).then((function(t){var n=t.location.lng,a=t.location.lat,o={longitude:n,latitude:a,currentCity:"Coordinates Retrieved..."};return e.setState(o),fetch(w+"/api/location?longitude="+n+"&latitude="+a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})})).then((function(t){200===t.status?t.json().then((function(t){var n={currentCity:t.long_name,locationRetrieved:!0};e.setState(n)})):(e.setState({currentCity:"Cannot get location"}),Promise.reject("Google geocoding API cannot get a location"))})).catch((function(t){e.setState({currentCity:"Cannot get location"}),console.log(t)}))}},{key:"createJoinRoom",value:function(){var e=this,t=this.state.longitude,n=this.state.latitude,a=this.state.radius,o=this.state.currentCity;this.setState({loading:!0}),fetch(w+"/api/create-room",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({longitude:t,latitude:n,radius:a,city:o})}).then((function(t){200===t.status?t.json().then((function(t){var n="/rooms/"+t.roomNumber;e.goToRoom(n)})):404===t.status?alert("No restaurants found in your area. Try a larger radius."):alert("Unknown error. Server may be down.")})).catch((function(e){console.log(e)}))}},{key:"goToRoom",value:function(e){this.props.history.push(e)}},{key:"render",value:function(){return o.a.createElement(S.a,{active:this.state.loading,spinner:o.a.createElement(C.a,null),text:"Creating Room..."},o.a.createElement("div",{className:"main-page"},o.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),o.a.createElement("h2",null," Restaurants Near "),o.a.createElement("div",null,o.a.createElement(b.a,{icon:v.b,size:"xs"}),o.a.createElement("h4",{style:{display:"inline-block",margin:"6px"}},this.state.currentCity)),o.a.createElement(k,{updateRadius:this.updateRadius.bind(this)}),o.a.createElement("button",{onTouchStart:"",disabled:!this.state.locationRetrieved,onClick:this.createJoinRoom},"CREATE")))}}]),n}(o.a.Component),R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(s.a)(this,n);var o=(a=t.call(this,e)).props.match.params.roomNumber;return a.state={city:"Retrieving...",roomNumber:o,participants:[]},a.joinRoom=a.joinRoom.bind(Object(h.a)(a)),a.updateStateInfo=a.updateStateInfo.bind(Object(h.a)(a)),a.startSwiping=a.startSwiping.bind(Object(h.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.socket;this.joinRoom(this.state.roomNumber);var n=this;t.on("room info",(function(e){n.updateStateInfo(e)})),t.on("general error",(function(){n.props.history.push("/rooms")})),t.on("user disconnect",(function(e){n.updateStateInfo(e)})),t.on("room active",(function(){alert("Room "+e.state.roomNumber+" has already begun swiping!"),n.props.history.push("/")})),t.on("room started swiping",(function(){n.props.history.push("/swiping",{roomNumber:e.state.roomNumber})}))}},{key:"updateStateInfo",value:function(e){for(var t=JSON.parse(e),n=t.participants,a=[],o=0;o<n.length;o++)a.push(n[o].socketID);this.setState({participants:a}),this.setState({city:t.city}),this.setState({radius:t.radius})}},{key:"joinRoom",value:function(e){this.props.socket.emit("room",e)}},{key:"startSwiping",value:function(){this.props.socket.emit("initiate swiping")}},{key:"render",value:function(){return o.a.createElement("div",{className:"main-page"},o.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),o.a.createElement("h2",null," Room ",this.state.roomNumber," "),o.a.createElement("div",{style:{paddingTop:"5px",paddingBottom:"5px"}},o.a.createElement("h4",null," Looking for restaurants in"),o.a.createElement(b.a,{icon:v.b,size:"xs"}),o.a.createElement("h4",{style:{display:"inline-block",margin:"2px"}},this.state.city),o.a.createElement("h4",{style:{padding:"0px"}},this.state.radius?"("+this.state.radius+"KM radius)":"")),o.a.createElement("h4",null,this.state.participants.length," user",1===this.state.participants.length?"":"s"," in this room"),o.a.createElement("button",{onTouchStart:"",onClick:this.startSwiping},"EVERYONE IS IN"))}}]),n}(o.a.Component),T=(n(91),n(63)),x=n.n(T),I=n(64),D=(n(124),n(26)),M=n.n(D),A=[{name:"Richard Hendricks",url:"./img/richard.jpg"},{name:"Erlich Bachman",url:"./img/erlich.jpg"},{name:"Monica Hall",url:"./img/monica.jpg"},{name:"Jared Dunn",url:"./img/jared.jpg"},{name:"Dinesh Chugtai",url:"./img/dinesh.jpg"}];var J=function(){var e=A,t=Object(a.useState)(),n=Object(I.a)(t,2),r=n[0],i=n[1];return o.a.createElement("div",null,o.a.createElement("h1",null,"React Tinder Card"),o.a.createElement("div",{className:"cardContainer"},e.map((function(e){return o.a.createElement(M.a,{className:"swipe",key:e.name,onSwipe:function(t){return n=t,a=e.name,console.log("removing: "+a),void i(n);var n,a},onCardLeftScreen:function(){return t=e.name,void console.log(t+" left the screen!");var t},preventSwipe:["up","down"]},o.a.createElement("div",{style:{backgroundImage:"url("+e.url+")"},className:"card"},o.a.createElement("h3",null,e.name)))}))),r?o.a.createElement("h2",{className:"infoText"},"You swiped ",r):o.a.createElement("h2",{className:"infoText"},"No direction swiped"))},z=(n(129),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={restaurants:[]},a}return Object(c.a)(n,[{key:"swiped",value:function(e,t){"right"===e&&(this.props.socket.emit("swipe right",t),console.log("removing: "+t+" after swiping "+e))}},{key:"outOfFrame",value:function(e){console.log(e+" left the screen!")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.socket,n=this;this.props.location.state.roomNumber||this.props.history.push("/");var a=this.props.location.state.roomNumber;fetch("http://app-chicken-tinder.apps.us-east-2.starter.openshift-online.com/api/rooms/?roomNumber="+a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200===e.status?e.json().then((function(e){console.log(e);var t=e.restaurants;n.setState({restaurants:t})})):404===e.status?(alert("Server error. This room could not be found."),n.props.history.push("/")):(alert("Unknown error. Server may be down."),n.props.history.push("/"))})).catch((function(e){console.log(e)})),t.on("general error",(function(e){alert(e),n.props.history.push("/rooms")})),t.on("match found",(function(t){for(var n,a=0;a<e.state.restaurants.length;a++)if(e.state.restaurants[a].placeID===t){n=e.state.restaurants[a].name;break}alert("You all liked "+n+"!")})),t.on("user disconnect",(function(){alert("A user swiping in your room has disconnected!")}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"cardContainer"},this.state.restaurants.map((function(t){return o.a.createElement(M.a,{className:"swipe",key:t.name,onSwipe:function(n){return e.swiped(n,t.placeID)},onCardLeftScreen:function(){return e.outOfFrame(t.name)},preventSwipe:["up","down"]},o.a.createElement("div",{style:{backgroundImage:"url("+t.photoURL+")"},className:"card"},o.a.createElement("h3",null,t.name)))}))))}}]),n}(o.a.Component)),L=x.a.connect("http://app-chicken-tinder.apps.us-east-2.starter.openshift-online.com",{reconnection:!1}),P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement(m.a,null,o.a.createElement("div",null,o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/rooms/:roomNumber",render:function(e){return o.a.createElement(R,Object.assign({},e,{socket:L}))}}),o.a.createElement(p.a,{exact:!0,path:"/",component:f}),o.a.createElement(p.a,{exact:!0,path:"/create",render:function(e){return o.a.createElement(N,Object.assign({},e,{socket:L}))}}),o.a.createElement(p.a,{exact:!0,path:"/swiping",render:function(e){return o.a.createElement(z,Object.assign({},e,{socket:L}))}}),o.a.createElement(p.a,{exact:!0,path:"/rooms",component:E}),o.a.createElement(p.a,{exact:!0,path:"/test",component:J}),o.a.createElement(p.a,{component:y}))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){e.exports=n(130)},70:function(e,t,n){},91:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.82feaf71.chunk.js.map