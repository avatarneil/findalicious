(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{52:function(t,e,n){t.exports=n(97)},57:function(t,e,n){},64:function(t,e,n){},94:function(t,e){},97:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(48),r=n.n(i),c=(n(57),n(4)),s=n(5),l=n(7),u=n(6),m=n(17),h=n(12),p=n(9),d=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={roomNumber:""},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.goToRoom=a.goToRoom.bind(Object(p.a)(a)),a}return Object(s.a)(n,[{key:"handleChange",value:function(t){this.setState({roomNumber:t.target.value})}},{key:"goToRoom",value:function(){var t="/rooms/"+this.state.roomNumber;this.props.history.push(t)}},{key:"render",value:function(){var t=this;return o.a.createElement("form",{onSubmit:this.submit,ref:function(e){return t.setWrapperRef=e}},o.a.createElement("input",{className:"pop-up",type:"text",value:this.state.roomNumber,placeholder:"Room Number",onChange:this.handleChange,required:!0,maxLength:"4",pattern:"[0-9]*"}),o.a.createElement("button",{onTouchStart:"",style:{backgroundColor:"rgb(95, 204, 95)"},onClick:this.goToRoom},"JOIN"))}}]),n}(o.a.Component),f=Object(h.f)(d),b=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={formShowing:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"main-page"},o.a.createElement("img",{src:"logo.png",className:"logo",alt:"Chicken Tinder Icon",onClick:function(){return t.setState({formShowing:!1})}}),o.a.createElement("div",null,this.state.formShowing?o.a.createElement(f,null):o.a.createElement("div",null,o.a.createElement("button",{className:"pop-up",onTouchStart:"",onClick:function(e){t.props.history.push("/create")}},"CREATE ROOM"),o.a.createElement("button",{onTouchStart:"",onClick:function(){return t.setState({formShowing:!0})}},"JOIN ROOM"))))}}]),n}(o.a.Component),g=n(13),v=n(14);function y(){return o.a.createElement("div",{className:"main-page"},o.a.createElement("h2",null,"Page Not Found"),o.a.createElement(m.b,{to:"/"},o.a.createElement(g.a,{icon:v.a,size:"2x"})))}function E(){return o.a.createElement("div",{className:"main-page"},o.a.createElement("h2",null,"Room Not Found"),o.a.createElement("p",null,"Please make sure you've entered a valid room ID in the URL   "),o.a.createElement(m.b,{to:"/"},o.a.createElement(g.a,{icon:v.a,size:"2x"})))}var k=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={active:1},a}return Object(s.a)(n,[{key:"_handleClick",value:function(t){this.setState({active:t}),(0,this.props.updateRadius)(t)}},{key:"render",value:function(){var t={width:"27%",display:"inline-block",fontSize:"small",backgroundColor:"#b6b6b6"},e={width:"27%",display:"inline-block",fontSize:"small",fontWeight:"bolder",backgroundColor:"#858585",boxShadow:"0 0px rgba(153, 153, 153, 0.24)",transform:"translateY(1px)"};return o.a.createElement("div",{style:{paddingBottom:"20px",paddingTop:"20px"}},o.a.createElement("button",{onTouchStart:"",onClick:this._handleClick.bind(this,1),style:1===this.state.active?e:t},"1KM"),o.a.createElement("button",{onTouchStart:"",onClick:this._handleClick.bind(this,2),style:2===this.state.active?e:t},"2KM"),o.a.createElement("button",{onTouchStart:"",onClick:this._handleClick.bind(this,5),style:5===this.state.active?e:t},"5KM"))}}]),n}(o.a.Component),j="http://app-chicken-tinder.apps.us-east-2.starter.openshift-online.com",C=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={currentCity:"Retrieving Location...",longitude:0,latitude:0,locationRetrieved:!1,radius:1},a.createJoinRoom=a.createJoinRoom.bind(Object(p.a)(a)),a.goToRoom=a.goToRoom.bind(Object(p.a)(a)),a}return Object(s.a)(n,[{key:"updateRadius",value:function(t){this.setState({radius:t})}},{key:"componentDidMount",value:function(){var t=this.props.socket,e=this;t.on("room info",(function(t){console.log(t)})),fetch("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyDj9SUs2BLoGDf-ctUrDX1Mj11XBpdAzks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return 200===t.status?t.json():(e.setState({currentCity:"Cannot get coordinates"}),Promise.reject("Google geolocation API cannot get coordinates"))})).then((function(t){var n=t.location.lng,a=t.location.lat,o={longitude:n,latitude:a,currentCity:"Coordinates Retrieved..."};return e.setState(o),fetch(j+"/api/location?longitude="+n+"&latitude="+a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})})).then((function(t){200===t.status?t.json().then((function(t){var n={currentCity:t.long_name,locationRetrieved:!0};e.setState(n)})):(e.setState({currentCity:"Cannot get location"}),Promise.reject("Google geocoding API cannot get a location"))})).catch((function(t){e.setState({currentCity:"Cannot get location"}),console.log(t)}))}},{key:"createJoinRoom",value:function(){var t=this,e=this.state.longitude,n=this.state.latitude,a=this.state.radius,o=this.state.currentCity;fetch(j+"/api/create-room",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({longitude:e,latitude:n,radius:a,city:o})}).then((function(e){200===e.status&&e.json().then((function(e){console.log(e);var n="/rooms/"+e.roomNumber;t.goToRoom(n)}))})).catch((function(t){console.log(t)}))}},{key:"goToRoom",value:function(t){this.props.history.push(t)}},{key:"render",value:function(){var t=this.updateRadius;return o.a.createElement("div",{className:"main-page"},o.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),o.a.createElement("h2",null," Restaurants Near "),o.a.createElement("div",null,o.a.createElement(g.a,{icon:v.b,size:"xs"}),o.a.createElement("h4",{style:{display:"inline-block",margin:"6px"}},this.state.currentCity)),o.a.createElement(k,{updateRadius:t.bind(this)}),o.a.createElement("button",{onTouchStart:"",disabled:!this.state.locationRetrieved,onClick:this.createJoinRoom},"CREATE"))}}]),n}(o.a.Component),O=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;Object(c.a)(this,n);var o=(a=e.call(this,t)).props.match.params.roomNumber;return a.state={city:"Retrieving...",roomNumber:o,participants:[]},a.joinRoom=a.joinRoom.bind(Object(p.a)(a)),a.updateStateInfo=a.updateStateInfo.bind(Object(p.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.socket;this.joinRoom(this.state.roomNumber);var e=this;t.on("room info",(function(t){e.updateStateInfo(t)})),t.on("error",(function(){e.props.history.push("/rooms")})),t.on("user disconnect",(function(t){e.updateStateInfo(t)}))}},{key:"updateStateInfo",value:function(t){for(var e=JSON.parse(t),n=e.participants,a=[],o=0;o<n.length;o++)a.push(n[o].socketID);this.setState({participants:a}),this.setState({city:e.city})}},{key:"joinRoom",value:function(t){this.props.socket.emit("room",t)}},{key:"render",value:function(){return o.a.createElement("div",{className:"main-page"},o.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),o.a.createElement("h2",null," Room ",this.state.roomNumber," "),o.a.createElement("div",null,o.a.createElement(g.a,{icon:v.b,size:"xs"}),o.a.createElement("h4",{style:{display:"inline-block",margin:"6px"}},this.state.city)),o.a.createElement("h4",null," ",this.state.participants.length," user(s) in this room "),o.a.createElement("button",{onTouchStart:""},"EVERYONE IS IN"))}}]),n}(o.a.Component),S=(n(64),n(51)),R=n.n(S).a.connect("http://app-chicken-tinder.apps.us-east-2.starter.openshift-online.com",{reconnection:!1}),N=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement(m.a,null,o.a.createElement("div",null,o.a.createElement(h.c,null,o.a.createElement(h.a,{exact:!0,path:"/rooms/:roomNumber",render:function(t){return o.a.createElement(O,Object.assign({},t,{socket:R}))}}),o.a.createElement(h.a,{exact:!0,path:"/",component:b}),o.a.createElement(h.a,{exact:!0,path:"/create",render:function(t){return o.a.createElement(C,Object.assign({},t,{socket:R}))}}),o.a.createElement(h.a,{exact:!0,path:"/rooms",component:E}),o.a.createElement(h.a,{component:y}))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.e44d77e3.chunk.js.map